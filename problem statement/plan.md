# описание слой энергетика

<!-- Есть общая просьба. У вас описано решение. Проблему/задачу приходится восстанавливать исходя из решения. Поэтому сложно прикинуть (на самом деле не только поэтому, еще мешает отсутсвие полного (хоть какого-то) понимание предметной области)  на сколько удовлетворит заказчика. Можете добавить постановку задачи или решаемой проблемы. Заранее благодарю. -->

## понимание предметной области

<!-- TODO:: переиспользовать
    постановка задачи старая

постановка проблемы,решение,результат -->

есть частично выгрузки лерева объектов (энергоснабжение): подстанция, куст, скважины

часть схемы (рисуется) руками - энергоцентры, ячейки, линии, ...

отдельно есть список потребителей (примерная принадлежность, название, индекс в базе??) - возможно соотнести потребителей к участку сети.

## Постановка задачи

<!-- одна из претензий экономистов (невозможность учета потерь электроэнергии, эту проблему решает модуль Тимура) снимается -->

В работе::

1. потери:: расчет стоимости доставки энергии до потребителя (источник + потери)
   1. источника питания (энергоцентр) отдельно по каждому потребителю (скважина для сквозного сценария)
   2. потери в линиях - фиксированный коэффициент
2. MONITORING::
   2. данные энергопотребления на промежуточных объектах с счетчиков (АСТУЭ, feature store)
   3. добавить актуальные индексы объектов (ois id, uuid, well_num, pad_num) - пока индексы астуэ отсутствуют
3. whatif
   1. энергопотребление - данные из солвера whatif нефтесбора
4. расчет по графу
   1. определение нагрузки в точке (сумма потоков kW по графу)
   2. определение неучтенных потребителей - разница между модельным и измерением со счетчика

Потенциально::

1. WHATIF:: планирование энергопотребления, расчет на n месяцев вперед с учетом плана добычи
   1. пока непонятно, как задается план, включение выключение скважин и т.д.
   2. расчет с учетом потенциала скважины, вероятности отключения
2. (оптимизация) выбора подключения - перебором состояния коммутаторов предлагать более оптимальную схему питания
   1. зная стоимость энергии в двух источниках - предложить оптимальную схему энергоснабжения потребителей (состояние коммутаторов, количество закупаемой энергии) с точки зрения стоимости энергии
3. [расчет](https://docs.google.com/document/d/1V68Cift4CSXPsAthedTbkUZcKrdxQHNvP6lutOpcsek/edit#) пиковых нагрузок (для периодических скважин)
   1. определить максимальную нагрузку в сети, с учетом что скважины работают только в определенный период

### развитие проекта 1

подготовить соответсвие к текущим запросам слоя экономики

### Реализация. 1

АСТУЭ - счетчики технического учета энергопотребления:: читать данные из индекса energy_consumption в граф

1. дописать индексы счетчиков в элементы графа
2. запросом считывать только необходимые данные??
3. однозначная привязка счетчиков к элементам графа
   1. ИЛИ:: отдельные ячейки - отдельный примитив в графе - можно менять состояние ячейки
   2. ИЛИ:: читать все дочерние ячейки в объект (подстанция ... до 20 ячеек, суммировать результат ....)

Расчет суммы по графу - отдельная команда солвера аналогично нефтесбору::

1. расчет без учета потерь:: (только матрица инцидентности, умножить на выбранный параметр - аргумент команды (power_kwh...))
2. расчет с фиксированными потерями - писать компонентные уравнения, разбираюсь на модели
3. ИЛИ:: обход графа. научился передавать данные в постпроцессинг, алгоритм расчета потерь дописываю.



### развитие проекта 2

### Реализация. 2
